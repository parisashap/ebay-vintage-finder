## eBay Vintage Finder

Next.js app that searches eBay Browse API listings.

## Supabase auth + favorites (easy MVP)

1. Create a Supabase project and copy:
- Project URL
- Anon key
- Service role key (server-only)

2. Set env vars in Vercel and `.env.local`:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_SERVICE_ROLE_KEY` (optional unless you add admin/server routes)

3. Run this SQL in Supabase SQL Editor:

```sql
create table if not exists favorites (
  id bigint generated by default as identity primary key,
  user_id uuid not null,
  item_id text not null,
  title text,
  image_url text,
  item_url text,
  price_value numeric,
  price_currency text,
  created_at timestamptz default now(),
  unique (user_id, item_id)
);

alter table favorites enable row level security;

create policy "Users can view their favorites"
on favorites for select
using (auth.uid() = user_id);

create policy "Users can insert their favorites"
on favorites for insert
with check (auth.uid() = user_id);

create policy "Users can delete their favorites"
on favorites for delete
using (auth.uid() = user_id);
```

## Pre-deploy check (recommended)

Run this before pushing/deploying:

```bash
npm run preflight:vercel
```

This check validates:
- `NODE_ENV` is not a non-standard value.
- Required env vars exist: `EBAY_CLIENT_ID`, `EBAY_CLIENT_SECRET`.
- Sandbox credentials are paired with `EBAY_ENV=sandbox`.
- Production build succeeds (`next build --webpack`).

## Vercel env vars

Set these in Vercel Project Settings -> Environment Variables:
- `EBAY_CLIENT_ID`
- `EBAY_CLIENT_SECRET`
- `EBAY_ENV` (set to `sandbox` when using `-SBX-` credentials; otherwise leave unset for production)
- `EBAY_MARKETPLACE_ID` (optional, default `EBAY_US`)

Do not set `NODE_ENV` manually in Vercel.

---

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
